---
id: windows
title: 在Windows上手动安装
sidebar_label: Windows
slug: /installation/windows
description: 在Windows上手动安装或编译本模块的教程。
---

import DarkButton from '@site/src/components/DarkButton';
import IconExternalLink from '@theme/IconExternalLink';
import InlineIcon from '@site/src/components/InlineIcon';
import mdiDownloadBox from '@iconify-icons/mdi/download-box';
import vsiDebugAlt from '@iconify-icons/codicon/debug-alt';

本教程包含安装或编译`mpegCoder`的步骤。建议需要在项目里局部部署本模块的用户使用这种方式安装。

## 安装预编译的模块

### 下载`mpegCoder`

首先，用户需要下载本项目的单模块文件。下表提供了下载链接。请根据你的环境选择对应的版本。

| mpegCoder | FFMpeg | Numpy | Python | VS | 操作系统 |
| :-----: | :-----: | :-----: | :-----: | :-----: | :-----: |
| [`3.1.0`<InlineIcon icon={mdiDownloadBox}/>][download-3-1-0-py39] | `4.4` | `1.21.1` | `3.9.6` | `2019 (v142)` | `Windows 10 21H1` |
| [`3.1.0`<InlineIcon icon={mdiDownloadBox}/>][download-3-1-0-py38] | `4.4` | `1.21.1` | `3.8.10` | `2019 (v142)` | `Windows 10 21H1` |
| [`3.1.0`<InlineIcon icon={mdiDownloadBox}/>][download-3-1-0-py37] | `4.4` | `1.21.1` | `3.7.10` | `2019 (v142)` | `Windows 10 21H1` |
| [`3.1.0`<InlineIcon icon={mdiDownloadBox}/>][download-3-1-0-py36] | `4.4` | `1.19.5` | `3.6.13` | `2019 (v142)` | `Windows 10 21H1` |
| [`3.1.0`<InlineIcon icon={mdiDownloadBox}/>][download-3-1-0-py35] | `4.4` | `1.15.2` | `3.5.5` | `2019 (v142)` | `Windows 10 21H1` |

解压所下载的taball后，就可以得到`mpegCoder.pyd`文件。

:::info

上面提到的这些相关项目的版本，只是用来表明预编译`mpegCoder`时所用的环境。这并不代表运行这些预编译的`mpegCoder`必须要依赖这些版本。例如，用户也可以在`python 3.9.5`和`numpy 1.19.5`的环境下运行`mpegCoder`。

:::

### 安装Numpy

运行`mpegCoder`之前，必须先安装合适版本的[Numpy<IconExternalLink/>][link-numpy]。每个`mpegCoder`发行版的最佳Numpy版本已经列在上表之中。如果你安装的Numpy版本与所需的最佳版本差距过大，`mpegCoder`可能无法正常运行。以下是安装命令：

```shell
python -m pip install numpy==<version>
```

### 下载依赖项

在发行页上，我们提供了预编译好的依赖项。这些依赖项包含几个`.dll`文件。用户需要根据`mpegCoder`所需的FFMpeg版本，来选择合适的tarball，来下载、并解压文件。

| FFMpeg |
| :-----: |
| [`4.4`<InlineIcon icon={mdiDownloadBox}/>][download-ff-4-4] |

以上这些文件是直接从FFMpeg的官方发行页摘出的。用户也可以在[这里<IconExternalLink/>][link-ffmpeg-download]找到它们。

### 导入

要导入模块，用户需要将`mpegCoder.pyd`和所下载的依赖项文件放在同一个文件夹里，例如：

```shell
.
|---mpegCoder.pyd
|---avcodec-58.dll
|---avformat-58.dll
|---avutil-56.dll
|---swresample-3.dll
`---swscale-5.dll
```

此后，进入这个文件夹，就可以直接通过以下代码导入本模块。

```python
import mpegCoder
```

## 编译模块

如果用户需要自行编译模块，则可以按照以下发布在Github上的指导完成：

<p>
  <DarkButton to="https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/blob/master/README.md" icon={vsiDebugAlt}>
    使用VS2019编译
  </DarkButton>
</p>

[download-3-1-0-py39]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/3.1.0/mpegCoder_3_1_0_Win_py39.tar.xz
[download-3-1-0-py38]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/3.1.0/mpegCoder_3_1_0_Win_py38.tar.xz
[download-3-1-0-py37]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/3.1.0/mpegCoder_3_1_0_Win_py37.tar.xz
[download-3-1-0-py36]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/3.1.0/mpegCoder_3_1_0_Win_py36.tar.xz
[download-3-1-0-py35]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/3.1.0/mpegCoder_3_1_0_Win_py35.tar.xz
[download-ff-4-4]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/deps-3.0.0/dll-win-ffmpeg_4_4.tar.xz
[link-ffmpeg-download]:https://www.gyan.dev/ffmpeg/builds/#release-section "FFMpeg release"
[link-numpy]:https://numpy.org "Numpy"
