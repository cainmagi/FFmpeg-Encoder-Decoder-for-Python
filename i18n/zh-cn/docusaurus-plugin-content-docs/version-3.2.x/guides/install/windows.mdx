---
id: windows
title: 在Windows上手动安装
sidebar_label: Windows
slug: /installation/windows
description: 在Windows上手动安装或编译本模块的教程。
---

import DarkButton from '@site/src/components/DarkButton';
import IconExternalLink from '@theme/IconExternalLink';
import InlineIcon from '@site/src/components/InlineIcon';
import mdiDownloadBox from '@iconify-icons/mdi/download-box';
import vsiDebugAlt from '@iconify-icons/codicon/debug-alt';

本教程包含安装或编译`mpegCoder`的步骤。建议需要在项目里局部部署本模块的用户使用这种方式安装。

## 安装预编译的模块 {#install-the-pre-compiled-module}

### 下载`mpegCoder` {#download-mpegcoder}

首先，用户需要下载本项目的单模块文件。下表提供了下载链接。请根据你的环境选择对应的版本。

| mpegCoder | FFMpeg | Numpy | Python | VS | 操作系统 |
| :-----: | :-----: | :-----: | :-----: | :-----: | :-----: |
| [`3.2.0`<InlineIcon icon={mdiDownloadBox}/>][download-3-2-0-py310] | `5.0` | `1.22.3` | `3.10.4` | `2022 (v143)` | `Windows 11 21H2` |
| [`3.2.0`<InlineIcon icon={mdiDownloadBox}/>][download-3-2-0-py39]  | `5.0` | `1.22.3` | `3.9.12` | `2022 (v143)` | `Windows 11 21H2` |
| [`3.2.0`<InlineIcon icon={mdiDownloadBox}/>][download-3-2-0-py38]  | `5.0` | `1.22.3` | `3.8.13` | `2022 (v143)` | `Windows 11 21H2` |
| [`3.2.0`<InlineIcon icon={mdiDownloadBox}/>][download-3-2-0-py37]  | `5.0` | `1.21.5` | `3.7.12` | `2022 (v143)` | `Windows 11 21H2` |
| [`3.2.0`<InlineIcon icon={mdiDownloadBox}/>][download-3-2-0-py36]  | `5.0` | `1.19.5` | `3.6.15` | `2022 (v143)` | `Windows 11 21H2` |

解压所下载的taball后，就可以得到`mpegCoder.pyd`文件。

:::info

上面提到的这些相关项目的版本，只是用来表明预编译`mpegCoder`时所用的环境。这并不代表运行这些预编译的`mpegCoder`必须要依赖这些版本。例如，用户也可以在`python 3.9.5`和`numpy 1.22.0`的环境下运行`mpegCoder`。

:::

### 安装Numpy {#install-numpy}

运行`mpegCoder`之前，必须先安装合适版本的[Numpy<IconExternalLink/>][link-numpy]。每个`mpegCoder`发行版的最佳Numpy版本已经列在上表之中。如果你安装的Numpy版本与所需的最佳版本差距过大，`mpegCoder`可能无法正常运行。以下是安装命令：

```shell
python -m pip install numpy==<version>
```

### 下载依赖项 {#download-dependencies}

在发行页上，我们提供了预编译好的依赖项。这些依赖项包含几个`.dll`文件。用户需要根据`mpegCoder`所需的FFMpeg版本，来选择合适的tarball，来下载、并解压文件。

| FFMpeg |
| :-----: |
| [`5.0`<InlineIcon icon={mdiDownloadBox}/>][download-ff-5-0] |

以上这些文件是直接从FFMpeg的官方发行页摘出的。用户也可以在[这里<IconExternalLink/>][link-ffmpeg-download]找到它们。

### 导入 {#import}

要导入模块，用户需要将`mpegCoder.pyd`和所下载的依赖项文件放在同一个文件夹里，例如：

```shell
.
|---mpegCoder.pyd
|---avcodec-59.dll
|---avformat-59.dll
|---avutil-57.dll
|---swresample-4.dll
`---swscale-6.dll
```

此后，进入这个文件夹，就可以直接通过以下代码导入本模块。

```python
import mpegCoder
```

## 编译模块 {#compile-the-module}

如果用户需要自行编译模块，则可以按照以下发布在Github上的指导完成：

<p>
  <DarkButton to="https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/blob/3.2.0/README.md" icon={vsiDebugAlt}>
    使用VS2022编译
  </DarkButton>
</p>

[download-3-2-0-py310]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/3.2.0/mpegCoder_3_2_0_Win_py310.tar.xz
[download-3-2-0-py39]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/3.2.0/mpegCoder_3_2_0_Win_py39.tar.xz
[download-3-2-0-py38]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/3.2.0/mpegCoder_3_2_0_Win_py38.tar.xz
[download-3-2-0-py37]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/3.2.0/mpegCoder_3_2_0_Win_py37.tar.xz
[download-3-2-0-py36]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/3.2.0/mpegCoder_3_2_0_Win_py36.tar.xz
[download-ff-5-0]:https://github.com/cainmagi/FFmpeg-Encoder-Decoder-for-Python/releases/download/deps-3.2.0/dll-win-ffmpeg_5_0.tar.xz
[link-ffmpeg-download]:https://www.gyan.dev/ffmpeg/builds/#release-section "FFMpeg release"
[link-numpy]:https://numpy.org "Numpy"
